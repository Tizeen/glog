<!DOCTYPE html>
<html lang="zh-cn"><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
   <meta name="description" content="近期又接触了阿里云 flow 这个工具，发现自己对 CI、CD 这块一直没有比较成型的记忆，所以简单整理记录一下。
CI CD是什么

  
  
CI：持续集成，开发人员在每次更改代码后都会将代码提交到版本控制系统。然后，CI 服务器会自动构建、测试和验证代码。CD：持续交付/部署，持续部署到服务器中。

CI、CD 的整个过程都是围绕着自动化产生的，力求做到更快、更可靠的交付。
制品
制品可以理解是 CI 的产物，它可以是一个 Jar 包、一个 Docker 镜像、一个二进制文件。
制品是连接 CI 、CD 的传动轴。
制品不应该是死的，应该给它赋予 元数据，这些元数据可以标识制品是否被测试过、是否符合上线的标准，从而定义好 制品的生命周期。Jfrog Artifactory 很好的体现了这一点，而 Nexus 只是单纯的存储仓库，想要做到元数据，还需要额外的系统进行配合。
制品生命周期：

  
    开发阶段，对应 dev 仓库，保留最近15天的数据
  
  
    测试阶段，对应 test 仓库，保留最近15天的数据
  
  
    预发布阶段，对应 stage 仓库，制品永久保留
  
  
    正式发布，对应 release 仓库，制品应该是从 stage 仓库 Promete 提升上来的，也需要永久保留
  

如何设计CI CD流水线
目前主要接触过 2 种设计：

  
    CI、CD 所有功能都集中在一条 pipeline 中。这种方法适用于 pipeline 不复杂的情况，能够一步到位，完成所有事情。
  
  
    CI、CD 分两条不同的 pipeline，各自负责相应的事情。通过制品使 CI、CD 关联起来，分开的 CI、CD 相对更加灵活，权限管控更加方便。
  

串行和并行：例如代码扫描和编译和并行执行，提升效率">  

  <title>
    
      对CI、CD的理解记录
    
  </title>


  <link rel="shortcut icon" type="image/x-icon" href="/" />
  
  
  
  <link rel="stylesheet" href="/css/main.900100e9dbee2d56c58fac8bb717037cae7e26a9c36c29d2ff587bdd65f0cbbe510b41d81a3bb234919cdfdc7550d786b2fab70c8fc507772d732fe097106d12.css" integrity="sha512-kAEA6dvuLVbFj6yLtxcDfK5&#43;JqnDbCnS/1h73WXwy75RC0HYGjuyNJGc39x1UNeGsvq3DI/FB3ctcy/glxBtEg==" />
  
</head>
<body a="auto">
        <main class="page-content" aria-label="Content">
            <div class="w">
<a href="/">..</a>


<article>
    <p class="post-meta">
        <time datetime="2024-05-14 14:37:35 &#43;0000 &#43;0000">
            2024-05-14
        </time>
    </p>

    <h1>对CI、CD的理解记录</h1>

    

    <p>近期又接触了阿里云 flow 这个工具，发现自己对 CI、CD 这块一直没有比较成型的记忆，所以简单整理记录一下。</p>
<h2 class="wp-block-heading" id="ci-cd是什么">CI CD是什么</h2>
<blockquote class="wp-block-quote is-layout-flow wp-block-quote-is-layout-flow">
  <p>
  </p>
<p><cite>CI：持续集成，开发人员在每次更改代码后都会将代码提交到版本控制系统。然后，CI 服务器会自动构建、测试和验证代码。<br /><br />CD：持续交付/部署，持续部署到服务器中。</cite></p>
</blockquote>
<p>CI、CD 的整个过程都是围绕着自动化产生的，力求做到更快、更可靠的交付。</p>
<h2 class="wp-block-heading" id="制品">制品</h2>
<p>制品可以理解是 CI 的产物，它可以是一个 Jar 包、一个 Docker 镜像、一个二进制文件。</p>
<p>制品是连接 CI 、CD 的传动轴。</p>
<p>制品不应该是死的，应该给它赋予 <strong>元数据</strong>，这些元数据可以标识制品是否被测试过、是否符合上线的标准，从而定义好 <strong>制品的生命周期</strong>。Jfrog Artifactory 很好的体现了这一点，而 Nexus 只是单纯的存储仓库，想要做到元数据，还需要额外的系统进行配合。</p>
<p>制品生命周期：</p>
<ol class="wp-block-list">
  <li>
    开发阶段，对应 dev 仓库，保留最近15天的数据
  </li>
  <li>
    测试阶段，对应 test 仓库，保留最近15天的数据
  </li>
  <li>
    预发布阶段，对应 stage 仓库，制品永久保留
  </li>
  <li>
    正式发布，对应 release 仓库，制品应该是从 stage 仓库 Promete 提升上来的，也需要永久保留
  </li>
</ol>
<h2 class="wp-block-heading" id="如何设计ci-cd流水线">如何设计CI CD流水线</h2>
<p>目前主要接触过 2 种设计：</p>
<ol class="wp-block-list">
  <li>
    CI、CD 所有功能都集中在一条 pipeline 中。这种方法适用于 pipeline 不复杂的情况，能够一步到位，完成所有事情。
  </li>
  <li>
    CI、CD 分两条不同的 pipeline，各自负责相应的事情。通过制品使 CI、CD 关联起来，分开的 CI、CD 相对更加灵活，权限管控更加方便。
  </li>
</ol>
<p>串行和并行：例如代码扫描和编译和并行执行，提升效率</p>
<p>在核心的功能之外，我们应该引入其他功能</p>
<ul class="wp-block-list">
  <li>
    单元测试
  </li>
  <li>
    自动化集成测试
  </li>
  <li>
    代码扫描
  </li>
</ul>
<p>CD 中还有很重要的一点是：回滚的能力。</p>

</article>

                

            </div>
        </main>
    </body>
</html>
